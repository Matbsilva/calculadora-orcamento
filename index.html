<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Orçamento de Obra</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <header>
        <h1>Calculadora de Orçamento de Obra</h1>
    </header>

    <nav>
        <ul>
            <li><button onclick="showTab('configuracoes')" class="active">Configurações</button></li>
            <li><button onclick="showTab('calculadora')">Calculadora</button></li>
            <li><button onclick="showTab('simulacoes-bdi')">Simulações BDI</button></li>
            <li><button onclick="showTab('relatorios')">Relatórios</button></li>
            <li><button onclick="showTab('exportacao')">Exportação</button></li>
        </ul>
    </nav>

    <main>
        <!-- Aba Configurações -->
        <section id="configuracoes" class="tab-content active">
            <h2>Configurações Gerais</h2>
            <form id="config-form">
                <fieldset>
                    <legend>Custos de Mão de Obra (R$/hora ou R$/dia)</legend>
                    <div>
                        <label for="laborPedreiro">Pedreiro:</label>
                        <input type="text" id="laborPedreiro" class="cost-input" aria-describedby="laborPedreiro-error">
                        <span id="laborPedreiro-error" class="sr-only">Valor inválido. Insira um número positivo.</span>
                    </div>
                    <div>
                        <label for="laborServente">Servente:</label>
                        <input type="text" id="laborServente" class="cost-input" aria-describedby="laborServente-error">
                        <span id="laborServente-error" class="sr-only">Valor inválido. Insira um número positivo.</span>
                    </div>
                    <div>
                        <label for="laborImpermeabilizador">Impermeabilizador:</label>
                        <input type="text" id="laborImpermeabilizador" class="cost-input" aria-describedby="laborImpermeabilizador-error">
                        <span id="laborImpermeabilizador-error" class="sr-only">Valor inválido. Insira um número positivo.</span>
                    </div>
                    <div>
                        <label for="laborCarpinteiro">Carpinteiro:</label>
                        <input type="text" id="laborCarpinteiro" class="cost-input" aria-describedby="laborCarpinteiro-error">
                        <span id="laborCarpinteiro-error" class="sr-only">Valor inválido. Insira um número positivo.</span>
                    </div>
                    <div>
                        <label for="laborArmador">Armador:</label>
                        <input type="text" id="laborArmador" class="cost-input" aria-describedby="laborArmador-error">
                        <span id="laborArmador-error" class="sr-only">Valor inválido. Insira um número positivo.</span>
                    </div>
                </fieldset>

                <fieldset>
                    <legend>Preços de Materiais (R$/unidade)</legend>
                    <!-- ALTERAÇÃO AQUI: Inputs de Materiais Completos -->
                    <div>
                        <label for="materialAreiaSaco20kg">Areia (sacos de 20 kg):</label>
                        <input type="text" id="materialAreiaSaco20kg" class="cost-input" aria-describedby="materialAreiaSaco20kg-error">
                        <span id="materialAreiaSaco20kg-error" class="sr-only">Valor inválido. Insira um número positivo.</span>
                    </div>
                    <div>
                        <label for="materialCimento50kg">Cimento (50 kg):</label>
                        <input type="text" id="materialCimento50kg" class="cost-input" aria-describedby="materialCimento50kg-error">
                        <span id="materialCimento50kg-error" class="sr-only">Valor inválido. Insira um número positivo.</span>
                    </div>
                    <div>
                        <label for="materialBlocoCeramico9cm">Bloco cerâmico 39x19x9 cm:</label>
                        <input type="text" id="materialBlocoCeramico9cm" class="cost-input" aria-describedby="materialBlocoCeramico9cm-error">
                        <span id="materialBlocoCeramico9cm-error" class="sr-only">Valor inválido. Insira um número positivo.</span>
                    </div>
                    <div>
                        <label for="materialBianco3_6L">Bianco (balde 3,6L):</label>
                        <input type="text" id="materialBianco3_6L" class="cost-input" aria-describedby="materialBianco3_6L-error">
                        <span id="materialBianco3_6L-error" class="sr-only">Valor inválido. Insira um número positivo.</span>
                    </div>
                    <div>
                        <label for="materialBianco18L">Bianco (18L):</label>
                        <input type="text" id="materialBianco18L" class="cost-input" aria-describedby="materialBianco18L-error">
                        <span id="materialBianco18L-error" class="sr-only">Valor inválido. Insira um número positivo.</span>
                    </div>
                    <div>
                        <label for="materialBlocoConcreto39x19x19">Bloco de Concreto 39x19x39 cm:</label>
                        <input type="text" id="materialBlocoConcreto39x19x19" class="cost-input" aria-describedby="materialBlocoConcreto39x19x19-error">
                        <span id="materialBlocoConcreto39x19x19-error" class="sr-only">Valor inválido. Insira um número positivo.</span>
                    </div>
                    <div>
                        <label for="materialEps10cm">EPS (Placa 1x1m, 10cm):</label>
                        <input type="text" id="materialEps10cm" class="cost-input" aria-describedby="materialEps10cm-error">
                        <span id="materialEps10cm-error" class="sr-only">Valor inválido. Insira um número positivo.</span>
                    </div>
                    <div>
                        <label for="materialTelaQ61">Tela Soldada Q61 (3,4mm/15cm):</label>
                        <input type="text" id="materialTelaQ61" class="cost-input" aria-describedby="materialTelaQ61-error">
                        <span id="materialTelaQ61-error" class="sr-only">Valor inválido. Insira um número positivo.</span>
                    </div>
                    <div>
                        <label for="materialBlocoCeramico14cm">Bloco Cerâmico 14x19x29cm:</label>
                        <input type="text" id="materialBlocoCeramico14cm" class="cost-input" aria-describedby="materialBlocoCeramico14cm-error">
                        <span id="materialBlocoCeramico14cm-error" class="sr-only">Valor inválido. Insira um número positivo.</span>
                    </div>
                    <div>
                        <label for="materialViaplus7000_18kg">Viaplus 7000 (balde 18kg):</label>
                        <input type="text" id="materialViaplus7000_18kg" class="cost-input" aria-describedby="materialViaplus7000_18kg-error">
                        <span id="materialViaplus7000_18kg-error" class="sr-only">Valor inválido. Insira um número positivo.</span>
                    </div>
                    <div>
                        <label for="materialTelaPoliester">Tela de Poliéster:</label>
                        <input type="text" id="materialTelaPoliester" class="cost-input" aria-describedby="materialTelaPoliester-error">
                        <span id="materialTelaPoliester-error" class="sr-only">Valor inválido. Insira um número positivo.</span>
                    </div>
                    <div>
                        <label for="materialPedra1Saco20kg">Pedra 1 (20 kg/saco):</label>
                        <input type="text" id="materialPedra1Saco20kg" class="cost-input" aria-describedby="materialPedra1Saco20kg-error">
                        <span id="materialPedra1Saco20kg-error" class="sr-only">Valor inválido. Insira um número positivo.</span>
                    </div>
                    <div>
                        <label for="materialBlocoCCA">Bloco de Concreto Celular (genérico):</label>
                        <input type="text" id="materialBlocoCCA" class="cost-input" aria-describedby="materialBlocoCCA-error">
                        <span id="materialBlocoCCA-error" class="sr-only">Valor inválido. Insira um número positivo.</span>
                    </div>
                    <div>
                        <label for="materialBlocoCCA603010">Bloco de Concreto Celular (60x30x10cm):</label>
                        <input type="text" id="materialBlocoCCA603010" class="cost-input" aria-describedby="materialBlocoCCA603010-error">
                        <span id="materialBlocoCCA603010-error" class="sr-only">Valor inválido. Insira um número positivo.</span>
                    </div>
                    <div>
                        <label for="materialTelaAcoPesada4_2mm10x10">Tela Aço Pesada 4,2mm Malha 10x10cm:</label>
                        <input type="text" id="materialTelaAcoPesada4_2mm10x10" class="cost-input" aria-describedby="materialTelaAcoPesada4_2mm10x10-error">
                        <span id="materialTelaAcoPesada4_2mm10x10-error" class="sr-only">Valor inválido. Insira um número positivo.</span>
                    </div>
                    <div>
                        <label for="materialArameRecozidoKg">Arame Recozido (kg):</label>
                        <input type="text" id="materialArameRecozidoKg" class="cost-input" aria-describedby="materialArameRecozidoKg-error">
                        <span id="materialArameRecozidoKg-error" class="sr-only">Valor inválido. Insira um número positivo.</span>
                    </div>
                    <div>
                        <label for="materialTabuasMadeiraM2">Tábuas de Madeira (m²):</label>
                        <input type="text" id="materialTabuasMadeiraM2" class="cost-input" aria-describedby="materialTabuasMadeiraM2-error">
                        <span id="materialTabuasMadeiraM2-error" class="sr-only">Valor inválido. Insira um número positivo.</span>
                    </div>
                    <div>
                        <label for="materialPregoKg">Prego (kg):</label>
                        <input type="text" id="materialPregoKg" class="cost-input" aria-describedby="materialPregoKg-error">
                        <span id="materialPregoKg-error" class="sr-only">Valor inválido. Insira um número positivo.</span>
                    </div>
                    <div>
                        <label for="materialTelaAcoLeve4_2mm15x15">Tela Aço Leve 4,2mm Malha 15x15cm:</label>
                        <input type="text" id="materialTelaAcoLeve4_2mm15x15" class="cost-input" aria-describedby="materialTelaAcoLeve4_2mm15x15-error">
                        <span id="materialTelaAcoLeve4_2mm15x15-error" class="sr-only">Valor inválido. Insira um número positivo.</span>
                    </div>
                    <div>
                        <label for="materialEps15cm">EPS (Placa 1x1m, 15cm):</label>
                        <input type="text" id="materialEps15cm" class="cost-input" aria-describedby="materialEps15cm-error">
                        <span id="materialEps15cm-error" class="sr-only">Valor inválido. Insira um número positivo.</span>
                    </div>
                    <!-- FIM DA ALTERAÇÃO DOS INPUTS DE MATERIAIS -->
                </fieldset>

                <fieldset>
                    <legend>BDI (Benefícios e Despesas Indiretas)</legend>
                    <div>
                        <label for="bdiFinalAdotado">BDI Final Adotado (%):</label>
                        <input type="text" id="bdiFinalAdotado" aria-describedby="bdiFinalAdotado-error">
                        <span id="bdiFinalAdotado-error" class="sr-only">Valor inválido. Use números de 0 a 1000.</span>
                    </div>
                </fieldset>

                <fieldset>
                    <legend>Dados do Projeto</legend>
                    <div>
                        <label for="areaObra">Área da Obra (m²):</label>
                        <input type="text" id="areaObra" aria-describedby="areaObra-error">
                        <span id="areaObra-error" class="sr-only">Valor inválido. Insira um número inteiro positivo.</span>
                    </div>
                </fieldset>
                <button type="button" id="default-config-button">Redefinir para Padrões</button>
            </form>
        </section>

        <!-- Aba Calculadora -->
        <section id="calculadora" class="tab-content">
            <h2>Calculadora de Orçamento</h2>
            <input type="text" id="search-input" placeholder="Filtrar itens...">
            <table>
                <thead>
                    <tr>
                        <th>Código/ID</th>
                        <th>Descrição do Serviço/Material</th>
                        <th>Unidade</th>
                        <th>Quantidade</th>
                        <th>Preço Unit. (R$)</th>
                        <th>Subtotal (R$)</th>
                    </tr>
                </thead>
                <tbody id="budget-table-body">
                    <!-- Linhas da tabela serão populadas por JavaScript -->
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="5" style="text-align: right; font-weight: bold;">Total Geral (c/ BDI):</td>
                        <td id="total-geral-orcamento" style="font-weight: bold;">R$ 0,00</td>
                    </tr>
                </tfoot>
            </table>
        </section>

        <!-- Aba Simulações BDI -->
        <section id="simulacoes-bdi" class="tab-content">
            <h2>Simulações de BDI</h2>
            <form id="bdi-simulation-form">
                <div>
                    <label for="adminPercent">Administração Central (%):</label>
                    <input type="text" id="adminPercent" class="percentage-input" aria-describedby="adminPercent-error">
                    <span id="adminPercent-error" class="sr-only">Valor inválido. Insira um percentual.</span>
                </div>
                <div>
                    <label for="riskPercent">Risco e Imprevistos (%):</label>
                    <input type="text" id="riskPercent" class="percentage-input" aria-describedby="riskPercent-error">
                    <span id="riskPercent-error" class="sr-only">Valor inválido. Insira um percentual.</span>
                </div>
                <div>
                    <label for="financialCostPercent">Custo Financeiro (%):</label>
                    <input type="text" id="financialCostPercent" class="percentage-input" aria-describedby="financialCostPercent-error">
                    <span id="financialCostPercent-error" class="sr-only">Valor inválido. Insira um percentual.</span>
                </div>
                <div>
                    <label for="taxesPercent">Tributos (ISS, PIS, COFINS, etc.) (%):</label>
                    <input type="text" id="taxesPercent" class="percentage-input" aria-describedby="taxesPercent-error">
                    <span id="taxesPercent-error" class="sr-only">Valor inválido. Insira um percentual.</span>
                </div>
                <div>
                    <label for="profitPercent">Lucro Previsto (%):</label>
                    <input type="text" id="profitPercent" class="percentage-input" aria-describedby="profitPercent-error">
                    <span id="profitPercent-error" class="sr-only">Valor inválido. Insira um percentual.</span>
                </div>
                <div>
                    <label for="percentFaturamentoMO">% do Faturamento que é Mão de Obra:</label>
                    <input type="text" id="percentFaturamentoMO" class="percentage-input" aria-describedby="percentFaturamentoMO-error">
                    <span id="percentFaturamentoMO-error" class="sr-only">Valor inválido. Insira um percentual de 0 a 100.</span>
                </div>

                <h3>BDI Sugerido (Cálculo Automático): <span id="bdiSugerido">0.00%</span></h3>
            </form>
        </section>

        <!-- Aba Relatórios -->
        <section id="relatorios" class="tab-content">
            <h2>Relatórios</h2>
            <p>Em desenvolvimento...</p>
        </section>

        <!-- Aba Exportação -->
        <section id="exportacao" class="tab-content">
            <h2>Exportar / Importar Orçamento</h2>
            <div>
                <button id="save-budget-button">Salvar Orçamento (JSON)</button>
            </div>
            <hr>
            <div>
                <label for="load-budget-input">Carregar Orçamento (JSON):</label>
                <input type="file" id="load-budget-input" accept=".json" aria-describedby="load-budget-input-error">
                <span id="load-budget-input-error" class="sr-only">Erro ao carregar o arquivo.</span>
            </div>
            <hr>
            <div>
                <button id="export-consolidated-csv-button">Exportar Materiais Consolidados (CSV)</button>
            </div>
            <div>
                <button id="export-detailed-csv-button">Exportar Materiais Detalhados por Serviço (CSV)</button>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; <span id="currentYear"></span> Sua Calculadora de Orçamento</p>
    </footer>

    <script type="module" src="js/main.js"></script>
</body>
</html>