<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Orçamento de Obra</title>
    <!-- ALTERAÇÃO AQUI: Link para o arquivo CSS -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <header>
        <h1>Calculadora de Orçamento de Obra</h1>
    </header>

    <nav>
        <ul>
            <li><button onclick="showTab('configuracoes')" class="active">Configurações</button></li>
            <li><button onclick="showTab('calculadora')">Calculadora</button></li>
            <li><button onclick="showTab('simulacoes-bdi')">Simulações BDI</button></li>
            <li><button onclick="showTab('relatorios')">Relatórios</button></li>
            <li><button onclick="showTab('exportacao')">Exportação</button></li>
        </ul>
    </nav>

    <main>
        <!-- Aba Configurações -->
        <section id="configuracoes" class="tab-content active">
            <h2>Configurações Gerais</h2>
            <form id="config-form">
                <fieldset>
                    <legend>Custos de Mão de Obra (R$/hora ou R$/dia)</legend>
                    <div>
                        <label for="laborPedreiro">Pedreiro:</label>
                        <input type="text" id="laborPedreiro" class="cost-input" data-key="pedreiro" aria-describedby="laborPedreiro-error">
                        <span id="laborPedreiro-error" class="sr-only">Valor inválido. Insira um número positivo.</span>
                    </div>
                    <div>
                        <label for="laborServente">Servente:</label>
                        <input type="text" id="laborServente" class="cost-input" data-key="servente" aria-describedby="laborServente-error">
                        <span id="laborServente-error" class="sr-only">Valor inválido. Insira um número positivo.</span>
                    </div>
                    <!-- Adicione outros inputs de mão de obra aqui, seguindo o padrão -->
                </fieldset>

                <fieldset>
                    <legend>Preços de Materiais (R$/unidade)</legend>
                    <div>
                        <label for="materialCimento">Cimento (saco 50kg):</label>
                        <input type="text" id="materialCimento" class="cost-input" data-key="cimento" aria-describedby="materialCimento-error">
                        <span id="materialCimento-error" class="sr-only">Valor inválido. Insira um número positivo.</span>
                    </div>
                    <div>
                        <label for="materialAreia">Areia (m³):</label>
                        <input type="text" id="materialAreia" class="cost-input" data-key="areia" aria-describedby="materialAreia-error">
                        <span id="materialAreia-error" class="sr-only">Valor inválido. Insira um número positivo.</span>
                    </div>
                    <!-- Adicione outros inputs de materiais aqui, seguindo o padrão -->
                </fieldset>

                <fieldset>
                    <legend>BDI (Benefícios e Despesas Indiretas)</legend>
                    <div>
                        <label for="bdiFinalAdotado">BDI Final Adotado (%):</label>
                        <input type="text" id="bdiFinalAdotado" aria-describedby="bdiFinalAdotado-error">
                        <span id="bdiFinalAdotado-error" class="sr-only">Valor inválido. Use números de 0 a 1000.</span>
                    </div>
                </fieldset>

                <fieldset>
                    <legend>Dados do Projeto</legend>
                    <div>
                        <label for="areaObra">Área da Obra (m²):</label>
                        <input type="text" id="areaObra" aria-describedby="areaObra-error">
                        <span id="areaObra-error" class="sr-only">Valor inválido. Insira um número inteiro positivo.</span>
                    </div>
                </fieldset>
                <button type="button" id="default-config-button">Redefinir para Padrões</button>
            </form>
        </section>

        <!-- Aba Calculadora -->
        <section id="calculadora" class="tab-content">
            <h2>Calculadora de Orçamento</h2>
            <input type="text" id="search-input" placeholder="Filtrar itens...">
            <table>
                <thead>
                    <tr>
                        <th>Código</th>
                        <th>Descrição do Serviço/Material</th>
                        <th>Unidade</th>
                        <th>Quantidade</th>
                        <th>Preço Unit. (R$)</th>
                        <th>Subtotal (R$)</th>
                    </tr>
                </thead>
                <tbody id="budget-table-body">
                    <!-- Linhas da tabela serão populadas por JavaScript -->
                    <!-- Exemplo de input de quantidade com span de erro (será gerado pelo JS) -->
                    <!-- 
                    <tr>
                        <td>SVC001</td>
                        <td>Alvenaria de Vedação</td>
                        <td>m²</td>
                        <td>
                            <input type="text" class="quantity-input" data-item-id="SVC001" aria-describedby="quantity-error-SVC001">
                            <span id="quantity-error-SVC001" class="sr-only">Quantidade inválida.</span>
                        </td>
                        <td>120.00</td>
                        <td>0.00</td>
                    </tr>
                    -->
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="5" style="text-align: right; font-weight: bold;">Total Geral:</td>
                        <td id="total-geral-orcamento" style="font-weight: bold;">R$ 0,00</td>
                    </tr>
                </tfoot>
            </table>
        </section>

        <!-- Aba Simulações BDI -->
        <section id="simulacoes-bdi" class="tab-content">
            <h2>Simulações de BDI</h2>
            <form id="bdi-simulation-form">
                <div>
                    <label for="adminPercent">Administração Central (%):</label>
                    <input type="text" id="adminPercent" class="percentage-input" aria-describedby="adminPercent-error">
                    <span id="adminPercent-error" class="sr-only">Valor inválido. Insira um percentual de 0 a 100.</span>
                </div>
                <div>
                    <label for="riskPercent">Risco e Imprevistos (%):</label>
                    <input type="text" id="riskPercent" class="percentage-input" aria-describedby="riskPercent-error">
                    <span id="riskPercent-error" class="sr-only">Valor inválido. Insira um percentual de 0 a 100.</span>
                </div>
                <div>
                    <label for="financialCostPercent">Custo Financeiro (%):</label>
                    <input type="text" id="financialCostPercent" class="percentage-input" aria-describedby="financialCostPercent-error">
                    <span id="financialCostPercent-error" class="sr-only">Valor inválido. Insira um percentual de 0 a 100.</span>
                </div>
                <div>
                    <label for="taxesPercent">Tributos (ISS, PIS, COFINS, etc.) (%):</label>
                    <input type="text" id="taxesPercent" class="percentage-input" aria-describedby="taxesPercent-error">
                    <span id="taxesPercent-error" class="sr-only">Valor inválido. Insira um percentual de 0 a 100.</span>
                </div>
                <div>
                    <label for="profitPercent">Lucro Previsto (%):</label>
                    <input type="text" id="profitPercent" class="percentage-input" aria-describedby="profitPercent-error">
                    <span id="profitPercent-error" class="sr-only">Valor inválido. Insira um percentual de 0 a 100.</span>
                </div>
                <div>
                    <label for="percentFaturamentoMO">% do Faturamento que é Mão de Obra (para cálculo de encargos sociais):</label>
                    <input type="text" id="percentFaturamentoMO" class="percentage-input" aria-describedby="percentFaturamentoMO-error">
                    <span id="percentFaturamentoMO-error" class="sr-only">Valor inválido. Insira um percentual de 0 a 100.</span>
                </div>

                <h3>BDI Sugerido (Cálculo Automático): <span id="bdiSugerido">0.00%</span></h3>
            </form>
        </section>

        <!-- Aba Relatórios -->
        <section id="relatorios" class="tab-content">
            <h2>Relatórios</h2>
            <p>Em desenvolvimento... (Curva ABC, Gráficos de Pizza, Cronograma Gantt)</p>
            <!-- Placeholder para futuros gráficos -->
            <!-- <div>
                <h3>Curva ABC de Custos</h3>
                <canvas id="curvaABCCanvas"></canvas>
            </div>
            <div>
                <h3>Distribuição de Custos</h3>
                <canvas id="distribuicaoCustosCanvas"></canvas>
            </div>
            <div>
                <h3>Cronograma Estimado (Gantt)</h3>
                <div id="ganttChartContainer"></div>
            </div> -->
        </section>

        <!-- Aba Exportação -->
        <section id="exportacao" class="tab-content">
            <h2>Exportar / Importar Orçamento</h2>
            <div>
                <button id="save-budget-button">Salvar Orçamento (JSON)</button>
            </div>
            <div>
                <label for="load-budget-input">Carregar Orçamento (JSON):</label>
                <input type="file" id="load-budget-input" accept=".json">
                 <span id="load-budget-input-error" class="sr-only">Erro ao carregar o arquivo. Verifique se é um JSON válido.</span>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; <span id="currentYear"></span> Sua Calculadora de Orçamento</p>
    </footer>

    <script type="module" src="js/main.js"></script>
</body>
</html>